// Textes
txt1 = "Bienvenue."
txt2 = "Cette page internet répertorie toutes nos manipulations servant à la réalisation des 5 objectifs du pentest Blackbox."
txt3 = "Elle est donc divisée en 5 parties :"

const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);
if (urlParams.get('skip') == 'true') {
    var target = document.getElementById('texte')
    var con = document.getElementById('console');
    con.className = "console-underscore hidden"
    target.innerHTML += txt1 + "<br><br>"
    target.innerHTML += txt2 + "<br>"
    target.innerHTML += txt3 + "<br><br>"
    target.innerHTML += "- <a class='chap' href='chap1.html'>Accès aux fichiers du système d'exploitation</a><br>"
    target.innerHTML += "- <a class='chap' href='chap2.html'>Usupation de l'identité du compte administrateur de ce système</a><br>"
    target.innerHTML += "- <a class='chap' href='chap3.html'>Blocage de l'accès de l'administrateur à ce système</a><br>"
    target.innerHTML += "- <a class='chap' href='chap4.html'>Modification du contenu web pouvant être mis en production</a><br>"
    target.innerHTML += "- <a class='chap' href='chap5.html'>Blocage de l'accès de l'administrateur à l'outil de conception du site web</a><br>"
    indic = document.getElementById("indication")
    indic.className = ""
}
else {
    afficheText();
}

function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function afficheText() {
    timer = 0;
    visible = true;
    var con = document.getElementById('console');
    waiting = true;
    words = ['Bienvenue.', 'oui']
    var letterCount = 1;
    var target = document.getElementById('texte')
    interu = window.setInterval(function() {
        if (visible === true) {
        con.className = 'console-underscore hidden'
        visible = false;

        } else {
        con.className = 'console-underscore'

        visible = true;
        }
    }, 400)
    inter1 = window.setInterval(function() {
        timer += 1;
        // console.log(timer)
        if (timer > 10 && timer < 35) {
            // console.log(words[0].substring(0, letterCount))
            target.innerHTML = txt1.substring(0, letterCount);
            letterCount += 1;
        }
        if (timer == 35) {
            target.innerHTML += "<br><br>"
            letterCount = 0;
            //clearInterval(inter1)
        }
    }, 120)
    inter2 = window.setInterval(function() {
        if (timer > 45 && letterCount < txt2.length && timer < 90) {
            target.innerHTML += txt2[letterCount]
            letterCount += 1
        }
        if (timer == 90) {
            timer += 1
            letterCount = 0;
            target.innerHTML += "<br>"
        }
        if (timer > 90 && letterCount < txt3.length) {
            target.innerHTML += txt3[letterCount]
            letterCount += 1
        }
        if (timer == 105) {
            timer += 1
            clearInterval(interu)
            target.innerHTML += "<br><br>"
            target.innerHTML += "- <a class='chap' href='chap1.html'>Accès aux fichiers du système d'exploitation</a><br>"
        }
        if (timer == 108) {
            timer += 1
            target.innerHTML += "- <a class='chap' href='chap2.html'>Usupation de l'identité du compte administrateur de ce système</a><br>"
        }
        if (timer == 111) {
            timer += 1
            target.innerHTML += "- <a class='chap' href='chap3.html'>Blocage de l'accès de l'administrateur à ce système</a><br>"
        }
        if (timer == 114) {
            timer += 1
            target.innerHTML += "- <a class='chap' href='chap4.html'>Modification du contenu web pouvant être mis en production</a><br>"
        }
        if (timer == 117) {
            timer += 1
            target.innerHTML += "- <a class='chap' href='chap5.html'>Blocage de l'accès de l'administrateur à l'outil de conception du site web</a><br>"
        }
        if (timer == 120) {
            timer += 1
            indic = document.getElementById("indication")
            indic.className = ""
            clearInterval(inter1)
            clearInterval(inter2)
        }
    }, 40)
}